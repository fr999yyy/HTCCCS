{% load static %}
{% load filters%}
<!doctype html>
<html lang="en">
    <head>
        <title>志工頁面</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <link rel="stylesheet" href="{% static 'style.css' %}">
        <!-- Bootstrap CSS v5.2.1 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />
        <!-- BS5 Icon -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    </head>

    <body>

            {% for message in messages %}
                {% if message.tags == 'error' %}
                    <div class="alert alert-danger alert-dismissible fade show position-absolute w-100" role="alert" style="z-index: 1050;">
                    <strong></strong> {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% elif message.tags == 'success' %}
                    <div class="alert alert-success alert-dismissible fade show position-absolute w-100" role="alert" style="z-index: 1050;">
                    <strong></strong> {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}
            {% endfor %}

                <main class="mt-3 pt-1">
                    <div class="container">
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab" aria-controls="tab1" aria-selected="true">國中部</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab" aria-controls="tab2" aria-selected="false">高中部</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab" aria-controls="tab3" aria-selected="false">課程</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="tab4-tab" data-bs-toggle="tab" data-bs-target="#tab4" type="button" role="tab" aria-controls="tab4" aria-selected="false">總表</button>
                            </li>
                        </ul>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
                                <form>
                                    <div class="mb-3">
                                        <label for="select1" class="form-label">Select Option</label>
                                        <select class="form-select" id="select1" name="select1">
                                            <option value="1">Option 1</option>
                                            <option value="2">Option 2</option>
                                            <option value="3">Option 3</option>
                                        </select>
                                    </div>
                                    <button type="button" class="btn btn-primary">Submit</button>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
                                <form>
                                    <div class="mb-3">
                                        <label for="select2" class="form-label">Select Option</label>
                                        <select class="form-select" id="select2" name="select2">
                                            <option value="1">Option 1</option>
                                            <option value="2">Option 2</option>
                                            <option value="3">Option 3</option>
                                        </select>
                                    </div>
                                    <button type="button" class="btn btn-primary">Submit</button>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="tab3" role="tabpanel" aria-labelledby="tab3-tab">
                                <form>
                                    <div class="mb-3">
                                        <label for="select3" class="form-label">Select Option</label>
                                        <select class="form-select" id="select3" name="select3">
                                            <option value="1">Option 1</option>
                                            <option value="2">Option 2</option>
                                            <option value="3">Option 3</option>
                                        </select>
                                    </div>
                                    <button type="button" class="btn btn-primary">Submit</button>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="tab4" role="tabpanel" aria-labelledby="tab4-tab">
                                <form>
                                    <div class="mb-3">
                                        <label for="select4" class="form-label">Select Option</label>
                                        <select class="form-select" id="select4" name="select4">
                                            <option value="1">Option 1</option>
                                            <option value="2">Option 2</option>
                                            <option value="3">Option 3</option>
                                        </select>
                                    </div>
                                    <button type="button" class="btn btn-primary">Submit</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </main>
        <footer>
            <!-- place footer here -->
        </footer>
        <script>

            document.getElementById('add_change_result_row').addEventListener('click', function() {
                // Clone the existing row
                var container = document.getElementById('change_result_container');
                var newRow = container.querySelector('.change_result_row').cloneNode(true);
                
                // Clear the input values in the cloned row
                newRow.querySelector('input[name="std_name"]').value = '';
                newRow.querySelector('select[name="course"]').selectedIndex = 0;
                
                // Append the cloned row to the container
                container.appendChild(newRow);
            });
            document.getElementById('section').addEventListener('change', function() {
            var sectionValue = this.value;
            fetch(`/courses_lookup/?section_id=${sectionValue}`)
                .then(response => response.json())
                .then(data => {
                    var courseSelect = document.querySelector('select[name="course"]');
                    courseSelect.innerHTML = '';
                    data.courses.forEach(course => {
                        var option = document.createElement('option');
                        option.value = course.course_id;
                        option.textContent = course.course_name;
                        courseSelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Error:', error));
        }); 
            document.addEventListener('DOMContentLoaded', function() {
                var sectionSelect = document.getElementById('section');
                var sectionId = "{{ section_id }}";
                if (sectionId) {
                    sectionSelect.value = sectionId;
                }
            });
        </script>
                <!-- Bootstrap JavaScript Libraries -->
                <script
                src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
                integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
                crossorigin="anonymous"
            ></script>
    
            <script
                src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
                integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
                crossorigin="anonymous"
            ></script>
    </body>
</html>
